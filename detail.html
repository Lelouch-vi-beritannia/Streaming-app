<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width">
<title>Detail</title>
</head>

<body>

<div id="info"></div>
<h2>Episode</h2>
<div id="episodes"></div>

<script>

const API="https://shivraapi.my.id/anm";

const slug=
new URLSearchParams(location.search)
.get("slug");

async function load(){

try{

const d=
await fetch(API+"/detail/"+slug);
const detail=await d.json();

document.getElementById("info")
.innerHTML=`
<h2>${detail.data.title}</h2>
<p>${detail.data.synopsis}</p>
`;

const e=
await fetch(API+"/episode/"+slug);
const ep=await e.json();

const list=
ep.data.episode_list ||
ep.data ||
[];

list.forEach(x=>{

document.getElementById("episodes")
.innerHTML+=`
<div onclick="play('${x.slug}')">
${x.title}
</div>
`;

});

}catch(err){
console.log(err);
}

}

function play(slug){
location.href="player.html?slug="+slug;
}

load();

</script>

</body>
</html>
